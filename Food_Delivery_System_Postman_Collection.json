{
  "info": {
    "name": "Food Delivery System API",
    "description": "Complete API collection for Food Delivery System microservices",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url_auth",
      "value": "http://0.0.0.0:8001",
      "type": "string"
    },
    {
      "key": "base_url_catalog",
      "value": "http://0.0.0.0:8002",
      "type": "string"
    },
    {
      "key": "base_url_order",
      "value": "http://0.0.0.0:8003",
      "type": "string"
    },
    {
      "key": "base_url_payment",
      "value": "http://0.0.0.0:8004",
      "type": "string"
    },
    {
      "key": "base_url_restaurant",
      "value": "http://0.0.0.0:8005",
      "type": "string"
    },
    {
      "key": "base_url_dispatch",
      "value": "http://0.0.0.0:8006",
      "type": "string"
    },
    {
      "key": "base_url_notification",
      "value": "http://0.0.0.0:8007",
      "type": "string"
    },
    {
      "key": "base_url_reporting",
      "value": "http://0.0.0.0:8008",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Auth Service",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url_auth}}/health",
              "host": ["{{base_url_auth}}"],
              "path": ["health"]
            }
          }
        },
        {
          "name": "Register User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"customer@example.com\",\n  \"name\": \"John Customer\",\n  \"password\": \"password123\",\n  \"role\": \"CUSTOMER\"\n}"
            },
            "url": {
              "raw": "{{base_url_auth}}/register",
              "host": ["{{base_url_auth}}"],
              "path": ["register"]
            }
          }
        },
        {
          "name": "Login Customer",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url_auth}}/login?email=customer@example.com&password=password123",
              "host": ["{{base_url_auth}}"],
              "path": ["login"],
              "query": [
                {
                  "key": "email",
                  "value": "customer@example.com"
                },
                {
                  "key": "password",
                  "value": "password123"
                }
              ]
            }
          }
        },
        {
          "name": "Login Restaurant",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url_auth}}/login?email=rest@example.com&password=string",
              "host": ["{{base_url_auth}}"],
              "path": ["login"],
              "query": [
                {
                  "key": "email",
                  "value": "rest@example.com"
                },
                {
                  "key": "password",
                  "value": "string"
                }
              ]
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url_auth}}/me",
              "host": ["{{base_url_auth}}"],
              "path": ["me"]
            }
          }
        }
      ]
    },
    {
      "name": "Catalog Service",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url_catalog}}/health",
              "host": ["{{base_url_catalog}}"],
              "path": ["health"]
            }
          }
        },
        {
          "name": "Get All Restaurants",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url_catalog}}/restaurants",
              "host": ["{{base_url_catalog}}"],
              "path": ["restaurants"]
            }
          }
        },
        {
          "name": "Get Restaurant by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url_catalog}}/restaurants/1",
              "host": ["{{base_url_catalog}}"],
              "path": ["restaurants", "1"]
            }
          }
        },
        {
          "name": "Create Restaurant",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"New Restaurant\",\n  \"description\": \"A great place to eat\",\n  \"address\": \"123 Main St\",\n  \"phone\": \"+1234567890\",\n  \"latitude\": 40.7128,\n  \"longitude\": -74.0060\n}"
            },
            "url": {
              "raw": "{{base_url_catalog}}/restaurants",
              "host": ["{{base_url_catalog}}"],
              "path": ["restaurants"]
            }
          }
        },
        {
          "name": "Update Restaurant",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Restaurant Name\",\n  \"description\": \"Updated description\",\n  \"address\": \"123 Main St\",\n  \"phone\": \"+1234567890\",\n  \"latitude\": 40.7128,\n  \"longitude\": -74.0060\n}"
            },
            "url": {
              "raw": "{{base_url_catalog}}/restaurants/3",
              "host": ["{{base_url_catalog}}"],
              "path": ["restaurants", "3"]
            }
          }
        },
        {
          "name": "Delete Restaurant",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url_catalog}}/restaurants/3",
              "host": ["{{base_url_catalog}}"],
              "path": ["restaurants", "3"]
            }
          }
        },
        {
          "name": "Get Menu Items",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url_catalog}}/restaurants/3/menu-items",
              "host": ["{{base_url_catalog}}"],
              "path": ["restaurants", "3", "menu-items"]
            }
          }
        },
        {
          "name": "Create Menu Item",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Margherita Pizza\",\n  \"description\": \"Classic tomato and mozzarella pizza\",\n  \"price\": 12.99,\n  \"category\": \"Pizza\",\n  \"is_available\": true\n}"
            },
            "url": {
              "raw": "{{base_url_catalog}}/restaurants/3/menu-items",
              "host": ["{{base_url_catalog}}"],
              "path": ["restaurants", "3", "menu-items"]
            }
          }
        },
        {
          "name": "Update Menu Item",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Pizza\",\n  \"description\": \"Updated description\",\n  \"price\": 14.99,\n  \"category\": \"Pizza\",\n  \"is_available\": true\n}"
            },
            "url": {
              "raw": "{{base_url_catalog}}/menu-items/1",
              "host": ["{{base_url_catalog}}"],
              "path": ["menu-items", "1"]
            }
          }
        },
        {
          "name": "Delete Menu Item",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url_catalog}}/menu-items/1",
              "host": ["{{base_url_catalog}}"],
              "path": ["menu-items", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "Order Service (When Available)",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url_order}}/health",
              "host": ["{{base_url_order}}"],
              "path": ["health"]
            }
          }
        },
        {
          "name": "Create Order",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"restaurant_id\": 3,\n  \"delivery_address\": \"123 Customer St\",\n  \"delivery_latitude\": 40.7589,\n  \"delivery_longitude\": -73.9851,\n  \"total_amount\": 25.98,\n  \"status\": \"PENDING_PAYMENT\",\n  \"items\": [\n    {\n      \"menu_item_id\": 1,\n      \"quantity\": 2,\n      \"price\": 12.99\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url_order}}/orders",
              "host": ["{{base_url_order}}"],
              "path": ["orders"]
            }
          }
        },
        {
          "name": "Get Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url_order}}/orders",
              "host": ["{{base_url_order}}"],
              "path": ["orders"]
            }
          }
        },
        {
          "name": "Get Order by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url_order}}/orders/1",
              "host": ["{{base_url_order}}"],
              "path": ["orders", "1"]
            }
          }
        },
        {
          "name": "Update Order Status",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "ACCEPTED"
            },
            "url": {
              "raw": "{{base_url_order}}/orders/1/status",
              "host": ["{{base_url_order}}"],
              "path": ["orders", "1", "status"]
            }
          }
        },
        {
          "name": "Get Order Items",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url_order}}/orders/1/items",
              "host": ["{{base_url_order}}"],
              "path": ["orders", "1", "items"]
            }
          }
        }
      ]
    },
    {
      "name": "Payment Service (When Available)",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url_payment}}/health",
              "host": ["{{base_url_payment}}"],
              "path": ["health"]
            }
          }
        },
        {
          "name": "Process Payment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"order_id\": 1,\n  \"amount\": 25.98,\n  \"payment_method\": \"credit_card\",\n  \"card_number\": \"4111111111111111\",\n  \"expiry_date\": \"12/25\",\n  \"cvv\": \"123\"\n}"
            },
            "url": {
              "raw": "{{base_url_payment}}/payments",
              "host": ["{{base_url_payment}}"],
              "path": ["payments"]
            }
          }
        },
        {
          "name": "Get Payment Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url_payment}}/payments/1",
              "host": ["{{base_url_payment}}"],
              "path": ["payments", "1"]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-extract access token from login responses",
          "if (pm.response && pm.response.json && pm.response.json().access_token) {",
          "    pm.collectionVariables.set('access_token', pm.response.json().access_token);",
          "    console.log('Access token updated:', pm.response.json().access_token);",
          "}"
        ]
      }
    }
  ]
}
